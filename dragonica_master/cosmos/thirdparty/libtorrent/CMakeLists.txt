project(libtorrent)

include_directories(
    ${CMAKE_CURRENT_SOURCE_DIR}/include
    ${CMAKE_CURRENT_SOURCE_DIR}/../../include
)

file(GLOB SOURCES
	${CMAKE_CURRENT_SOURCE_DIR}/ed25519/src/*.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/src/kademlia/*.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/src/*.c
)

add_definitions(
	-D_WIN32_WINNT=0x0501
	-DWIN32_LEAN_AND_MEAN
	-DBOOST_ASIO_ENABLE_CANCELIO
	# -DBOOST_ALL_STATIC_LINK
	-D_SCL_SECURE_NO_DEPRECATE
	-D_CRT_SECURE_NO_DEPRECATE
	-DTORRENT_BUILDING_LIBRARY
	-D_FILE_OFFSET_BITS=64
	-DBOOST_EXCEPTION_DISABLE
	-DBOOST_NO_EXCEPTIONS
	-DWITH_SHIPPED_GEOIP_H
	-DTORRENT_USE_TOMMATH
	-DTORRENT_VERBOSE_LOGGING
	-DTORRENT_LOGGING
	-DTORRENT_USE_LOCALE
)


add_library(${PROJECT_NAME} STATIC ${SOURCES})


target_include_directories(${PROJECT_NAME} PUBLIC
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
    $<INSTALL_INTERFACE:include>
)